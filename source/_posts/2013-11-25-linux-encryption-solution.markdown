---
layout: post
title: "一种Linux加密解决方案——ubuntu中配置dm-crypt总结"
date: 2013-11-25 05:31
comments: true
published: false
categories: Linux
---

这是最近接触的个人项目中的一部分。

## 加密需求

Linux环境中的程序加密，不可读取，不可拷贝是两大需求。   

+ 不可读取，指的是在运行Linux时除root用户以外，不能被其他用户读取。
+ 不可拷贝，指的是单独拿出硬盘时，不能读取硬盘中的数据。

## 不可读取的解决方案

这个很好解决，只要用户不具有root权限就可以通过设置文件权限，达到不可读取的目的。  
具体来讲：将要加密的数据/程序统一设置为`go-rwx`即可

## 不可拷贝的解决方案

这个才是本文阐述的重点。由于要防止硬盘被单独拿出挂载读取，因此磁盘或者分区加密加密是必要的。   
目前ubuntu 12.10以后就已经可以在系统安装时创建加密的LVM分区，采用的是`dm-crypt`

### 手动建立luks分区

### 启动时自动挂载加密分区

### keyfile放置于加密的home目录

___

通过以上步骤，就可以将需要加密的数据放到加密分区，并在启动时自动挂载，同时将自动挂载应用的key放到加密的Home目录下，进一步防止keyfile的窃取，综合几步就可以完成一定级别的保密。
